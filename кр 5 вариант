С индексом 
CREATE TABLE books (
    id INT PRIMARY KEY,
    title VARCHAR(100),
    author VARCHAR(50),
    year INT
);

SET SESSION cte_max_recursion_depth = 150000;

INSERT INTO books (id, title, author, year)
WITH RECURSIVE numbers(n) AS (
    SELECT 0
    UNION ALL
    SELECT n + 1 FROM numbers WHERE n < 149999
)
SELECT 
    n+1 AS id,
    CONCAT('Book', n+1) AS title,
    CONCAT('Author', FLOOR(RAND()*100)) AS author,
    1950 + FLOOR(RAND()*70) AS year
FROM numbers;

ALTER TABLE books
ADD FULLTEXT(title, author);

SELECT 'Поиск с индексом' AS test_type;
EXPLAIN SELECT *
FROM books
WHERE MATCH(title, author) AGAINST('Book 10' IN NATURAL LANGUAGE MODE);

-- 8. Проверка результатов (по желанию, только первые 5 записей)
SELECT * FROM books WHERE MATCH(title, author) AGAINST('Book 10' IN NATURAL LANGUAGE MODE) LIMIT 5;

без индекса 

CREATE TABLE books_no_index (
    id INT PRIMARY KEY,
    title VARCHAR(100),
    author VARCHAR(50),
    year INT
);

INSERT INTO books_no_index (id, title, author, year)
SELECT * FROM books;

SELECT 'Поиск без индекса' AS test_type;
EXPLAIN SELECT * 
FROM books_no_index
WHERE title LIKE '%Book 10%';

Проверка результатов (по желанию, только первые 5 записей)
SELECT * FROM books_no_index WHERE title LIKE '%Book 10%' LIMIT 5;
